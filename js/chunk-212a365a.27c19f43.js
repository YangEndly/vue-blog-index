(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-212a365a"],{"214f":function(t,e,a){"use strict";var s=a("32e9"),r=a("2aba"),i=a("79e5"),o=a("be13"),l=a("2b4c");t.exports=function(t,e,a){var n=l(t),c=a(o,n,""[t]),m=c[0],f=c[1];i(function(){var e={};return e[n]=function(){return 7},7!=""[t](e)})&&(r(String.prototype,t,m),s(RegExp.prototype,n,2==e?function(t,e){return f.call(t,this,e)}:function(t){return f.call(t,this)}))}},"3bb3":function(t,e,a){"use strict";var s=a("8c9b"),r=a.n(s);r.a},"84e1":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("main",[a("section",{staticClass:"wrap scroll"},[a("el-form",{ref:"form",attrs:{"label-width":"70px","label-position":"left"},model:{value:t.form,callback:function(e){t.form=e},expression:"form"}},[a("div",{staticClass:"leftbox"},[a("el-form-item",{attrs:{label:"文章标题"}},[a("el-input",{staticClass:"input_title",attrs:{size:"small"},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1),a("el-row",{attrs:{type:"flex"}},[a("el-form-item",{attrs:{label:"所属分类"}},[a("el-input",{attrs:{size:"small"},model:{value:t.form.classify,callback:function(e){t.$set(t.form,"classify",e)},expression:"form.classify"}})],1),a("el-form-item",{attrs:{label:"标签"}},[a("el-input",{attrs:{size:"small",placeholder:"多个标签用英文逗号隔开"},model:{value:t.form.tag,callback:function(e){t.$set(t.form,"tag",e)},expression:"form.tag"}})],1)],1),a("el-row",{attrs:{type:"flex"}},[a("el-form-item",{attrs:{label:"创建日期"}},[a("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd",type:"date",size:"small",placeholder:"选择日期"},model:{value:t.form.created_at,callback:function(e){t.$set(t.form,"created_at",e)},expression:"form.created_at"}})],1),a("el-form-item",{attrs:{label:"浏览量"}},[a("el-input-number",{attrs:{size:"small",precision:0,min:0,controls:!1},model:{value:t.form.clicks,callback:function(e){t.$set(t.form,"clicks",e)},expression:"form.clicks"}})],1),a("el-form-item",{attrs:{label:"点赞量"}},[a("el-input-number",{attrs:{size:"small",precision:0,min:0,controls:!1},model:{value:t.form.like,callback:function(e){t.$set(t.form,"like",e)},expression:"form.like"}})],1)],1)],1),a("div",{staticClass:"rightbox"},[a("el-form-item",{attrs:{label:"文章封面"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"/apis/img/blogbanner","show-file-list":!1,"on-success":t.handleAvatarSuccess,"before-upload":t.beforeAvatarUpload}},[t.blogBanner?a("img",{staticClass:"avatar",attrs:{src:t.blogBanner}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)],1)]),a("mavon-editor",{ref:"md",staticClass:"makedown",on:{imgAdd:t.$imgAdd},model:{value:t.form.content,callback:function(e){t.$set(t.form,"content",e)},expression:"form.content"}})],1),a("footer",[t.$route.params.id?a("el-button",{attrs:{type:"info",size:"small"},on:{click:t.editBtn}},[t._v("保存修改")]):a("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.addBtn}},[t._v("保　存")])],1)])},r=[],i=(a("a481"),a("cadf"),a("551c"),a("097d"),a("bc3a")),o=a.n(i),l={data:function(){return{title:"写博客",blogBanner:"",form:{title:"",desc:"",img:"",content:"",classify:"",tag:"",clicks:"",like:"",deleted_at:!1,created_at:new Date}}},created:function(){this.$route.params.id&&this.getArticle()},watch:{$route:function(t,e){this.blogBanner="",this.form={title:"",desc:"",img:"",content:"",classify:"",tag:"",clicks:"",like:"",deleted_at:!1,created_at:new Date}}},methods:{addBtn:function(){var t=this;this.$post("/apis/article/add",this.form).then(function(e){console.log(e),1==e.data.status?(t.$message.success("新增文章成功！"),t.$router.push("/admin/articlelist")):t.$message.error(e.data.msg)})},getArticle:function(){var t=this;this.$post("/apis/article/read",this.$route.params).then(function(e){console.log(e.data.data),t.form=e.data.data,t.form.tag=e.data.data.tag.join(","),t.blogBanner=t.$baseUrl+t.form.img})},editBtn:function(){var t=this;this.$post("/apis/article/change",this.form).then(function(e){console.log(e),1==e.data.status?(t.$message.success(e.data.msg),t.$router.push("/admin/articlelist")):t.$message.error(e.data.msg)})},handleAvatarSuccess:function(t,e){this.form.img&&this.handleRemove(),this.blogBanner=URL.createObjectURL(e.raw),1==t.status&&(this.$message.success("图片上传成功"),this.form.img=t.data.replace("public","storage"))},handleRemove:function(){var t=this,e={url:this.form.img.replace("storage","public")};this.$post("/apis/img/delete",e).then(function(e){if(1!=e.data.status)return t.$message.error(e.data.msg),!1;t.$message.success(e.data.msg)})},beforeAvatarUpload:function(t){var e="image/png"===t.type,a=t.size/1024/1024<3;return e||this.$message.error("上传头像图片只能是 JPG 格式!"),a||this.$message.error("上传头像图片大小不能超过 3MB!"),e&&a},$imgAdd:function(t,e){var a=this,s=new FormData;s.append("picture",e),o()({url:"/apis/img/blogdetail",method:"post",data:s,headers:{"Content-Type":"multipart/form-data"}}).then(function(s){console.log(111,s.data.path,e),a.$refs.md.$img2Url(t,a.$baseUrl+s.data.path)})}}},n=l,c=(a("3bb3"),a("2877")),m=Object(c["a"])(n,s,r,!1,null,"0c7961ad",null);m.options.__file="addArticle.vue";e["default"]=m.exports},"8c9b":function(t,e,a){},a481:function(t,e,a){a("214f")("replace",2,function(t,e,a){return[function(s,r){"use strict";var i=t(this),o=void 0==s?void 0:s[e];return void 0!==o?o.call(s,i,r):a.call(String(i),s,r)},a]})}}]);