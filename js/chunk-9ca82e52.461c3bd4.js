(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9ca82e52"],{"0086":function(t,e,i){"use strict";var a=i("2487"),s=i.n(a);s.a},"127b":function(t,e,i){t.exports=i.p+"img/article.683097ff.jpg"},"214f":function(t,e,i){"use strict";var a=i("32e9"),s=i("2aba"),n=i("79e5"),c=i("be13"),o=i("2b4c");t.exports=function(t,e,i){var r=o(t),l=i(c,r,""[t]),d=l[0],m=l[1];n(function(){var e={};return e[r]=function(){return 7},7!=""[t](e)})&&(s(String.prototype,t,d),a(RegExp.prototype,r,2==e?function(t,e){return m.call(t,this,e)}:function(t){return m.call(t,this)}))}},2487:function(t,e,i){},"6e0d":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:" detail higtlight"},[a("div",{staticClass:"banner"},[a("img",{attrs:{src:i("127b"),alt:""}}),a("div",{staticClass:"bg"}),t.text_loading?t._e():a("div",{staticClass:"text-box"},[a("h2",[t._v(t._s(t.detail.title))]),a("div",{staticClass:"post-tag"},t._l(t.detail.tag,function(e,i){return a("span",{key:i},[t._v(t._s(e))])})),a("div",{staticClass:"post-meta"},[a("div",[a("i",{staticClass:"iconfont lv-icon-kalendar"}),t._v(t._s(t.detail.created_at.substring(0,10)))]),a("span",[t._v("•")]),a("div",[a("i",{staticClass:"iconfont lv-icon-huore"}),t._v(t._s(t.detail.clicks)+"热度")]),a("span",[t._v("•")]),a("div",[a("i",{staticClass:"iconfont lv-icon-wenjianjia"}),t._v(t._s(t.detail.classify))])])])]),t.text_loading?a("TextLoading",{staticClass:"article"}):a("div",{staticClass:"article"},[a("div",{directives:[{name:"highlight",rawName:"v-highlight"}],domProps:{innerHTML:t._s(t.compiledMarkdown)}}),a("div",{staticClass:"posmition"},[t._v("\n      由 "),a("a",{attrs:{href:"http://github.com/sweida",target:"_black"}},[t._v("sweida")]),t._v(" 创作，采用 \n      "),a("a",{attrs:{href:"https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh",target:"_black"}},[t._v("知识共享署名-非商业性使用 4.0 国际许可协议")]),t._v(" 进行许可。\n      "),a("p",[t._v("基于上的作品创作。")])]),a("div",{staticClass:"giveLike animate03",class:{hasclick:t.hasclick},on:{click:t.giveLike}},[a("i",{staticClass:"iconfont lv-icon-yijin13-zan"}),a("span",[t._v(t._s(t.detail.like))])])]),a("div",{staticClass:"commentbox"},[a("div",{staticClass:"comment-title"},[a("p",[t._v("评论 "),a("span",[t._v("「 "+t._s(t.detail.comment)+" 」")])])]),a("div",{staticClass:"input-box"},[a("div",{staticClass:"userbox"},[t.user.id?a("div",{staticClass:"user-img"},[1==t.user.is_admin?a("img",{attrs:{src:i("9b02")}}):a("img",{attrs:{src:i("ebe2")("./00"+t.user.id%10+".jpg")}}),a("h4",[t._v(t._s(t.user.username))])]):a("div",{staticClass:"user-img"},[a("img",{attrs:{src:i("fd6b")}}),a("h4",[t._v("游客")])])]),a("div",{staticClass:"textbox"},[a("Input",{attrs:{type:"textarea",autosize:{minRows:4,maxRows:8},maxlength:400,placeholder:"说点什么。。支持markdown语法，尾部2个空格后回车才会换行，最长400个字"},model:{value:t.comment.content,callback:function(e){t.$set(t.comment,"content",e)},expression:"comment.content"}}),a("div",{staticClass:"submit-box"},[a("div",{staticClass:"ykname"},[t.user?t._e():a("Input",{staticStyle:{width:"150px"},attrs:{placeholder:"游客可以选填昵称"},model:{value:t.comment.username,callback:function(e){t.$set(t.comment,"username",e)},expression:"comment.username"}})],1),a("Button",{attrs:{type:"primary"},on:{click:t.submitComment}},[t._v("提交评论")])],1)],1)]),t.detail.comment?a("div",[t.loading?a("MyLoading"):t._l(t.commentList,function(e,s){return a("div",{key:s,staticClass:"commentList"},[a("div",{staticClass:"user-ava"},[1==e.user_id?a("img",{attrs:{src:i("9b02")}}):e.user_id?a("img",{attrs:{src:i("ebe2")("./00"+e.user_id%10+".jpg"),alt:""}}):a("img",{attrs:{src:i("fd6b")}})]),a("div",{staticClass:"comment-box animate03"},[a("div",{staticClass:"username"},[a("span",[a("Icon",{attrs:{type:"md-person"}}),t._v("\n              "+t._s(e.user?e.user.username:e.username?"游客（"+e.username+"）":"游客")+" \n              "),a("em",[t._v(t._s(1==e.user_id?"(博主)":""))]),a("span",{staticClass:"created"},[a("i",{staticClass:"el-icon-time"}),t._v(t._s(e.created_at))])],1)]),a("div",{directives:[{name:"highlight",rawName:"v-highlight"}],staticClass:"com_detail",domProps:{innerHTML:t._s(e.content)}}),e.user_id==t.user.id?a("div",{staticClass:"delete"},[a("Poptip",{attrs:{confirm:"",placement:"left",title:"是否删除该评论?"},on:{"on-ok":function(i){t.deleteComment(e)}}},[e.user_id==t.user.id&&e.user_id?a("Icon",{attrs:{type:"md-trash"}}):t._e()],1)],1):t._e()])])}),a("div",{staticClass:"more"},[t.hasMore?a("Button",{on:{click:t.getMore}},[t._v("加载更多")]):a("p",[t._v("没有更多了..")])],1)],2):a("div",{staticClass:"none"},[t._v("\n      还没有评论，快来抢沙发。\n    ")])])],1)},s=[],n=i("2909"),c=(i("a481"),i("ac6a"),i("be94")),o=i("2f62"),r=i("0e54"),l=i.n(r),d=(i("bc07"),{data:function(){return{text_loading:!0,show:!0,loading:!0,checked:!0,hasclick:!1,detail:[],commentList:[],comment:{content:"",username:"",article_id:""},pageModel:{id:1},page:2,hasMore:!0}},computed:Object(c["a"])({},Object(o["b"])(["user"]),{compiledMarkdown:function(){return l()(this.detail.content,{sanitize:!0})}}),created:function(){console.log(this.$route,444),this.getDetail()},watch:{$route:function(t,e){this.getDetail()}},methods:{getDetail:function(){var t=this;this.$post("/apis/article/read",this.$route.params).then(function(e){console.log(e.data),1==e.data.status?(t.detail=e.data.data,t.text_loading=!1,t.comment.article_id=t.detail.id,t.detail.comment&&t.getComment()):t.$message.error("文章请求失败")})},giveLike:function(){var t=this,e={id:this.detail.id};this.hasclick||this.$post("/apis/article/like",e).then(function(e){1==e.data.status&&(t.detail.like+=1,t.hasclick=!0)})},getComment:function(){var t=this,e={article_id:this.detail.id};this.$post("/apis/comment/read",e).then(function(e){console.log(e.data,"comment"),1==e.data.status&&(t.commentList=e.data.data,e.data.data.length<10&&(t.hasMore=!1),t.commentList&&t.commentList.forEach(function(t){t.content=l()(t.content,{sanitize:!0})}),t.loading=!1)})},submitComment:function(){var t=this;this.$post("/apis/comment/add",this.comment).then(function(e){console.log(e.data),t.comment.content="",t.detail.comment+=1,t.getComment()})},getMore:function(){var t=this,e={article_id:this.detail.id,page:this.page};this.$post("/apis/comment/read",e).then(function(e){var i;console.log(e.data,"commentList"),t.page+=1,e.data.data.length<10&&(t.hasMore=!1),e.data.data.forEach(function(t){t.content=t.content.replace(/\n/g,"<br>")}),(i=t.commentList).push.apply(i,Object(n["a"])(e.data.data))})},deleteComment:function(t){var e=this;this.$post("/apis/comment/remove",{id:t.id}).then(function(i){1==i.data.status?(e.commentList.splice(e.commentList.indexOf(t),1),e.$Message.success(i.data.msg),e.detail.comment-=1):e.$Message.error(i.data.msg)})}}}),m=d,u=(i("0086"),i("2877")),v=Object(u["a"])(m,a,s,!1,null,"73ee5038",null);v.options.__file="detail.vue";e["default"]=v.exports},a481:function(t,e,i){i("214f")("replace",2,function(t,e,i){return[function(a,s){"use strict";var n=t(this),c=void 0==a?void 0:a[e];return void 0!==c?c.call(a,n,s):i.call(String(n),a,s)},i]})},bc07:function(t,e,i){}}]);