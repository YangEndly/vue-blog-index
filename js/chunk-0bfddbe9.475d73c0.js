(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0bfddbe9"],{"0341":function(e,t,s){"use strict";var a=s("ebf2"),n=s.n(a);n.a},"888a":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("main",[s("el-button",{directives:[{name:"show",rawName:"v-show",value:0!=e.selectMessage.length,expression:"selectMessage.length!=0"}],staticClass:"delete",attrs:{type:"danger",size:"mini"},on:{click:e.selectDelete}},[e._v("删除选中")]),s("section",{staticClass:"wrap scroll"},[s("div",{staticClass:"main_table"},[s("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.message,stripe:"","max-height":"600","tooltip-effect":"dark"},on:{"selection-change":e.handleSelectionChange}},[s("el-table-column",{attrs:{type:"selection",width:"55"}}),s("el-table-column",{attrs:{prop:"id",label:"编号",width:"80"}}),s("el-table-column",{attrs:{label:"用户名","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.user_id?s("span",[e._v("\n              "+e._s(t.row.user.username)+"\n            ")]):s("span",[e._v("\n              (游客) "+e._s(t.row.ykname)+"\n            ")])]}}])}),s("el-table-column",{attrs:{prop:"content",label:"留言内容","show-overflow-tooltip":""}}),s("el-table-column",{attrs:{prop:"created_at",label:"创建日期","show-overflow-tooltip":""}}),s("el-table-column",{attrs:{label:"操作",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(s){e.deleteBtn(t.row)}}},[e._v("删除")])]}}])})],1),e.pageModel.sumCount>10?s("page",{attrs:{pageModel:e.pageModel},on:{selectList:e.selectRoleList}}):e._e()],1)])],1)},n=[],o=(s("ac6a"),s("14eb")),l={components:{page:o["a"]},data:function(){return{loading:!0,message:[],selectMessage:[],pageModel:{page:1,sumCount:10}}},created:function(){this.getMessage()},methods:{getMessage:function(){var e=this;this.loading=!0,this.$post("/apis/message/read",this.pageModel).then(function(t){1==t.data.status?(e.message=t.data.data,e.pageModel.sumCount=t.data.total):e.$message.error("获取数据失败！"),e.loading=!1})},selectRoleList:function(){this.getMessage()},deleteBtn:function(e){var t=this;this.$confirm("是否删除该留言?","提示",{type:"warning"}).then(function(){t.$post("/apis/message/remove",{id:e.id}).then(function(s){1==s.data.status?(console.log(s.data),t.message.splice(t.message.indexOf(e),1)):t.$message.error(s.data.msg)})}).catch(function(){})},handleSelectionChange:function(e){var t=[];e.forEach(function(e){t.push(e.id)}),this.selectMessage=t},selectDelete:function(){var e=this;this.$confirm("是否删除选中的留言?","提示",{type:"warning"}).then(function(){e.$post("/apis/message/remove",e.selectMessage).then(function(t){1==t.data.status?(e.$message.success(t.data.msg),e.getMessage()):e.$message.error(t.data.msg)})}).catch(function(){})}}},i=l,c=(s("0341"),s("2877")),r=Object(c["a"])(i,a,n,!1,null,"e5e7e962",null);r.options.__file="message.vue";t["default"]=r.exports},ebf2:function(e,t,s){}}]);