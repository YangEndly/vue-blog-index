(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-14003a9a"],{"214f":function(t,e,i){"use strict";var a=i("32e9"),s=i("2aba"),l=i("79e5"),o=i("be13"),r=i("2b4c");t.exports=function(t,e,i){var n=r(t),c=i(o,n,""[t]),u=c[0],d=c[1];l(function(){var e={};return e[n]=function(){return 7},7!=""[t](e)})&&(s(String.prototype,t,u),a(RegExp.prototype,n,2==e?function(t,e){return d.call(t,this,e)}:function(t){return d.call(t,this)}))}},2616:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("main",[i("section",{staticClass:"wrap scroll"},[i("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.addBtn}},[t._v("添 加")]),i("div",{staticClass:"main_table"},[i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.adlist,stripe:"","max-height":"600","tooltip-effect":"dark"}},[i("el-table-column",{attrs:{prop:"id",label:"编号",width:"80"}}),i("el-table-column",{attrs:{prop:"title",label:"标题","show-overflow-tooltip":""}}),i("el-table-column",{attrs:{prop:"type",label:"分类","show-overflow-tooltip":""}}),i("el-table-column",{attrs:{prop:"url",label:"链接","show-overflow-tooltip":""}}),i("el-table-column",{attrs:{label:"操作",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(i){t.editBtn(e.row)}}},[t._v("编辑")]),i("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(i){t.deleteBtn(e.row)}}},[t._v("删除")])]}}])})],1)],1)],1),i("el-dialog",{staticClass:"addimg",attrs:{title:t.title,visible:t.dialogFormVisible,top:"10vh"},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[i("el-form",{attrs:{model:t.form,"label-width":"130px",enctype:"multipart/form-data"}},[i("el-form-item",{attrs:{label:"标题"}},[i("el-input",{attrs:{clearable:"",size:"small"},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1),i("el-form-item",{attrs:{label:"分类"}},[i("el-input",{attrs:{clearable:"",size:"small"},model:{value:t.form.type,callback:function(e){t.$set(t.form,"type",e)},expression:"form.type"}})],1),i("el-form-item",{attrs:{label:"上传图片"}},[i("el-upload",{staticClass:"avatar-uploader",attrs:{action:"/apis/image/upload","show-file-list":!1,"on-success":t.handleAvatarSuccess,"before-upload":t.beforeAvatarUpload}},[t.imageUrl?i("img",{staticClass:"avatar",attrs:{src:t.$baseUrl+t.imageUrl}}):i("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),i("el-form-item",{staticClass:"href",attrs:{label:"图片链接"}},[i("el-input",{attrs:{readonly:""},model:{value:t.form.url,callback:function(e){t.$set(t.form,"url",e)},expression:"form.url"}})],1)],1),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"small"},on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),t.form.id?i("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.editSubmit}},[t._v("保存修改")]):i("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.addSubmit}},[t._v("保 存")])],1)],1)],1)},s=[],l=(i("f751"),i("a481"),{data:function(){return{title:"新增广告图",dialogFormVisible:!1,loading:!0,adlist:[],imageUrl:"",form:{title:"",url:"",type:""}}},created:function(){this.getLink()},methods:{getLink:function(){var t=this;this.$post("/apis/ad/list").then(function(e){console.log(e.data),t.adlist=e.data.data,t.loading=!1})},handleAvatarSuccess:function(t,e){this.form.url&&this.handleRemove(),this.imageUrl=URL.createObjectURL(e.raw),1==t.status&&(this.$message.success("图片上传成功"),this.form.url=t.data.replace("public","storage"))},handleRemove:function(){var t=this,e={url:this.form.url.replace("storage","public")};this.$post("/apis/image/delete",e).then(function(e){t.$message.success(e.message)})},beforeAvatarUpload:function(t){var e="image/jpeg"==t.type||"image/png",i=t.size/1024/1024<2;return e||this.$message.error("上传图片只能是 JPG和png 格式!"),i||this.$message.error("上传图片大小不能超过 2MB!"),e&&i},deleteBtn:function(t){var e=this;this.$confirm("是否删除该广告图?","提示",{type:"warning"}).then(function(){e.$post("/apis/ad/delete",{id:t.id}).then(function(i){e.$message.success(i.message),e.adlist.splice(e.adlist.indexOf(t),1)})}).catch(function(){})},addBtn:function(){this.title="新增友情链接",this.dialogFormVisible=!0,this.imageUrl="",this.form={title:"",href:"",end_time:""}},addSubmit:function(){var t=this;this.$post("/apis/ad/add",this.form).then(function(e){t.$message.success(e.message),t.dialogFormVisible=!1,t.getLink()})},editBtn:function(t){this.title="编辑广告图",this.dialogFormVisible=!0,this.form=Object.assign({},t),this.imageUrl=this.form.url},editSubmit:function(){var t=this;this.$post("/apis/ad/edit",this.form).then(function(e){t.$message.success(e.message),t.dialogFormVisible=!1,t.getLink()})}}}),o=l,r=(i("db75"),i("a35d"),i("2877")),n=Object(r["a"])(o,a,s,!1,null,"152ecb41",null);n.options.__file="ad.vue";e["default"]=n.exports},a35d:function(t,e,i){"use strict";var a=i("c0e8"),s=i.n(a);s.a},a481:function(t,e,i){i("214f")("replace",2,function(t,e,i){return[function(a,s){"use strict";var l=t(this),o=void 0==a?void 0:a[e];return void 0!==o?o.call(a,l,s):i.call(String(l),a,s)},i]})},abad:function(t,e,i){},c0e8:function(t,e,i){},db75:function(t,e,i){"use strict";var a=i("abad"),s=i.n(a);s.a}}]);