(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-94353a76"],{"43d9":function(s,t,e){},"5b65":function(s,t,e){s.exports=e.p+"img/yk.b8f1654c.jpg"},"9db6":function(s,t,e){"use strict";var a=e("43d9"),i=e.n(a);i.a},bc07:function(s,t,e){},c1eb:function(s,t,e){s.exports=e.p+"img/message.ece9c690.jpg"},e456:function(s,t,e){"use strict";e.r(t);var a,i=function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("div",{staticClass:"higtlight"},[a("div",{staticClass:"about-bg"},[a("img",{staticClass:"bg-img",attrs:{src:e("c1eb")}}),a("div",{staticClass:"bg"}),a("p",{staticClass:"mgs-title"},[s._v("Say Hello~")]),a("div",{staticClass:"input-main"},[a("div",{staticClass:"input-box main"},[a("div",{staticClass:"userbox"},[s.user.id?a("div",{staticClass:"user-img"},[1==s.user.is_admin?a("img",{attrs:{src:e("9b02")}}):a("img",{attrs:{src:e("ebe2")("./00"+s.user.id%10+".jpg")}}),a("h4",[s._v(s._s(s.user.username))])]):a("div",{staticClass:"user-img"},[a("img",{attrs:{src:e("5b65")}}),a("h4",[s._v("游客")])])]),a("div",{staticClass:"textbox"},[a("Input",{attrs:{type:"textarea",autosize:{minRows:4,maxRows:8},maxlength:400,placeholder:s.textarea},model:{value:s.message.content,callback:function(t){s.$set(s.message,"content",t)},expression:"message.content"}}),a("div",{staticClass:"submit-box"},[a("div",{staticClass:"ykname"},[s.user?s._e():a("Input",{staticStyle:{width:"120px"},attrs:{placeholder:"游客可以选填昵称"},model:{value:s.message.ykname,callback:function(t){s.$set(s.message,"ykname",t)},expression:"message.ykname"}})],1),a("Button",{attrs:{type:"primary"},on:{click:s.submitMessage}},[s._v("提交评论")])],1)],1)])])]),s.loading?a("MyLoading"):a("div",{staticClass:"main"},[s._l(s.messageList,function(t,i){return a("div",{key:i,staticClass:"commentList"},[a("div",{staticClass:"user-ava"},[1==t.user_id?a("img",{attrs:{src:e("9b02")}}):t.user_id?a("img",{attrs:{src:e("ebe2")("./00"+t.user_id%10+".jpg"),alt:""}}):a("img",{attrs:{src:e("5b65"),alt:""}})]),a("div",{staticClass:"comment-box animate03"},[a("div",{staticClass:"username"},[a("span",[a("Icon",{attrs:{type:"md-person"}}),s._v("\n            "+s._s(t.user?t.user.username:t.ykname?"游客（"+t.ykname+"）":"游客")+" \n            "),a("em",[s._v(s._s(1==t.user_id?"(博主)":""))]),a("span",{staticClass:"created"},[a("i",{staticClass:"el-icon-time"}),s._v(s._s(t.created_at))])],1),a("span",{staticClass:"floor"},[s._v(s._s(t.id)+"楼")])]),a("div",{directives:[{name:"highlight",rawName:"v-highlight"}],staticClass:"com_detail",domProps:{innerHTML:s._s(t.content)}}),a("div",{staticClass:"delete"},[a("Poptip",{attrs:{confirm:"",placement:"left",title:"是否删除该留言?"},on:{"on-ok":function(e){return s.deleteComment(t)}}},[t.user_id==s.user.id&&t.user_id?a("Icon",{attrs:{type:"md-trash"}}):s._e()],1)],1)])])}),s.pageModel.sumCount>10?a("MyPage",{attrs:{pageModel:s.pageModel},on:{selectList:s.selectRoleList}}):s._e()],2)],1)},n=[],c=e("b89d"),o=(e("612f"),e("3f47")),r=e("52c1"),m=e("32b2"),d=e.n(m),l=(e("bc07"),a={data:function(){return{textarea:"支持markdown语法，尾部2个空格后回车才会换行，最长400个字",autofocus:!1,loading:!0,messageList:[],message:{content:"",ykname:""},pageModel:{page:1,sumCount:10},page:2,hasMore:!0}},computed:Object(r["b"])({user:function(s){return s.user}})},Object(c["a"])(a,"computed",Object(o["a"])({},Object(r["b"])(["user"]),{compiledMarkdown:function(){return d()(this.detail.content,{sanitize:!0})}})),Object(c["a"])(a,"created",function(){this.getMessage()}),Object(c["a"])(a,"methods",{getMessage:function(){var s=this;this.$post("/apis/message/read",this.pageModel).then(function(t){console.log(t.data,"message"),s.loading=!1,s.pageModel.sumCount=t.data.total,s.messageList=t.data.data,s.messageList.forEach(function(s){s.content=d()(s.content,{sanitize:!0})})})},selectRoleList:function(){this.getMessage()},submitMessage:function(){var s=this;this.$post("/apis/message/add",this.message).then(function(t){console.log(t.data),s.getMessage(),1==t.data.status?s.message={content:"",ykname:""}:s.$message.error(t.data.msg)})},deleteComment:function(s){var t=this;this.$post("/apis/message/remove",{id:s.id}).then(function(e){1==e.data.status?(t.messageList.splice(t.messageList.indexOf(s),1),t.$Message.success(e.data.msg)):t.$Message.error(e.data.msg)})},reply:function(s){console.log(s),this.autofocus=!0,this.message.content="",this.message.reply_id=s,this.textarea="回复 ".concat(s,"楼")}}),a),u=l,g=(e("9db6"),e("17cc")),p=Object(g["a"])(u,i,n,!1,null,"7a0cd8c4",null);t["default"]=p.exports}}]);