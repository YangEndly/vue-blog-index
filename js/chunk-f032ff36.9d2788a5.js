(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f032ff36"],{"127b":function(t,e,a){t.exports=a.p+"img/article.683097ff.jpg"},"214f":function(t,e,a){"use strict";var i=a("32e9"),s=a("2aba"),n=a("79e5"),c=a("be13"),o=a("2b4c");t.exports=function(t,e,a){var l=o(t),r=a(c,l,""[t]),d=r[0],m=r[1];n(function(){var e={};return e[l]=function(){return 7},7!=""[t](e)})&&(s(String.prototype,t,d),i(RegExp.prototype,l,2==e?function(t,e){return m.call(t,this,e)}:function(t){return m.call(t,this)}))}},2196:function(t,e,a){},5826:function(t,e,a){"use strict";var i=a("2196"),s=a.n(i);s.a},"6e0d":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:" detail higtlight"},[i("div",{staticClass:"banner"},[i("img",{attrs:{src:a("127b"),alt:""}}),i("div",{staticClass:"bg"}),t.text_loading?t._e():i("div",{staticClass:"text-box"},[i("h2",[t._v(t._s(t.detail.title))]),i("div",{staticClass:"post-tag"},t._l(t.detail.tag,function(e,a){return i("span",{key:a},[t._v(t._s(e))])})),i("div",{staticClass:"post-meta"},[i("div",[i("i",{staticClass:"iconfont lv-icon-kalendar"}),t._v(t._s(t.detail.created_at.substring(0,10)))]),i("span",[t._v("•")]),i("div",[i("i",{staticClass:"iconfont lv-icon-huore"}),t._v(t._s(t.detail.clicks)+"热度")]),i("span",[t._v("•")]),i("div",[i("i",{staticClass:"iconfont lv-icon-wenjianjia"}),t._v(t._s(t.detail.classify))])])])]),t.text_loading?i("TextLoading",{staticClass:"article"}):i("div",{staticClass:"article"},[i("div",{directives:[{name:"highlight",rawName:"v-highlight"}],domProps:{innerHTML:t._s(t.compiledMarkdown)}}),i("div",{staticClass:"posmition"},[t._v("\n      由 "),i("a",{attrs:{href:"http://github.com/sweida",target:"_black"}},[t._v("sweida")]),t._v(" 创作，采用 \n      "),i("a",{attrs:{href:"https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh",target:"_black"}},[t._v("知识共享署名-非商业性使用 4.0 国际许可协议")]),t._v(" 进行许可。\n      "),i("p",[t._v("基于上的作品创作。")])]),i("div",{staticClass:"giveLike animate03",class:{hasclick:t.hasclick},on:{click:t.giveLike}},[i("i",{staticClass:"iconfont lv-icon-yijin13-zan"}),i("span",[t._v(t._s(t.detail.like))])])]),i("div",{staticClass:"commentbox"},[i("div",{staticClass:"comment-title"},[i("p",[t._v("评论 "),i("span",[t._v("「 "+t._s(t.detail.comment)+" 」")])])]),i("div",{staticClass:"input-box"},[i("div",{staticClass:"userbox"},[t.user.id?i("div",{staticClass:"user-img"},[i("img",{attrs:{src:a("ebe2")("./00"+t.user.id%10+".jpg")}}),i("h4",[t._v(t._s(t.user.username))])]):i("div",{staticClass:"user-img"},[i("img",{attrs:{src:a("fd6b")}}),i("h4",[t._v("游客")])])]),i("div",{staticClass:"textbox"},[i("Input",{attrs:{type:"textarea",autosize:{minRows:4,maxRows:8},maxlength:400,placeholder:"说点什么。。支持markdown语法，尾部2个空格后回车才会换行，最长400个字"},model:{value:t.comment.content,callback:function(e){t.$set(t.comment,"content",e)},expression:"comment.content"}}),i("div",{staticClass:"submit-box"},[i("div",{staticClass:"ykname"},[t.user?t._e():i("Input",{staticStyle:{width:"150px"},attrs:{placeholder:"游客可以选填昵称"},model:{value:t.comment.username,callback:function(e){t.$set(t.comment,"username",e)},expression:"comment.username"}})],1),i("Button",{attrs:{type:"primary"},on:{click:t.submitComment}},[t._v("提交评论")])],1)],1)]),t.detail.comment?i("div",[t.loading?i("MyLoading"):t._l(t.commentList,function(e,s){return i("div",{key:s,staticClass:"commentList"},[i("div",{staticClass:"user-ava"},[i("img",{attrs:{src:a("721b"),alt:""}})]),i("div",{staticClass:"comment-box animate03"},[i("div",{staticClass:"username"},[i("span",[i("Icon",{attrs:{type:"md-person"}}),t._v("\n              "+t._s(e.user?e.user.username:e.username?"游客（"+e.username+"）":"游客")+" \n              "),i("em",[t._v(t._s(1==e.user_id?"(博主)":""))]),i("span",{staticClass:"created"},[i("i",{staticClass:"el-icon-time"}),t._v(t._s(e.created_at))])],1)]),i("div",{directives:[{name:"highlight",rawName:"v-highlight"}],staticClass:"com_detail",domProps:{innerHTML:t._s(e.content)}}),e.user_id==t.user.id?i("div",{staticClass:"delete"},[i("Poptip",{attrs:{confirm:"",placement:"left",title:"是否删除该评论?"},on:{"on-ok":function(a){t.deleteComment(e)}}},[e.user_id==t.user.id&&e.user_id?i("Icon",{attrs:{type:"md-trash"}}):t._e()],1)],1):t._e()])])}),i("div",{staticClass:"more"},[t.hasMore?i("Button",{on:{click:t.getMore}},[t._v("加载更多")]):i("p",[t._v("没有更多了..")])],1)],2):i("div",{staticClass:"none"},[t._v("\n      还没有评论，快来抢沙发。\n    ")])])],1)},s=[],n=a("8afe"),c=(a("a481"),a("ac6a"),a("c93e")),o=a("2f62"),l=a("0e54"),r=a.n(l),d=(a("bc07"),{data:function(){return{text_loading:!0,show:!0,loading:!0,checked:!0,hasclick:!1,detail:[],commentList:[],comment:{content:"",username:"",article_id:""},pageModel:{id:1},page:2,hasMore:!0}},computed:Object(c["a"])({},Object(o["b"])(["user"]),{compiledMarkdown:function(){return r()(this.detail.content,{sanitize:!0})}}),created:function(){console.log(this.$route,444),this.getDetail()},watch:{$route:function(t,e){this.getDetail()}},methods:{getDetail:function(){var t=this;this.$post("/apis/article/read",this.$route.params).then(function(e){console.log(e.data),1==e.data.status?(t.detail=e.data.data,t.text_loading=!1,t.comment.article_id=t.detail.id,t.detail.comment&&t.getComment()):t.$message.error("文章请求失败")})},giveLike:function(){var t=this,e={id:this.detail.id};this.hasclick||this.$post("/apis/article/like",e).then(function(e){1==e.data.status&&(t.detail.like+=1,t.hasclick=!0)})},getComment:function(){var t=this,e={article_id:this.detail.id};this.$post("/apis/comment/read",e).then(function(e){console.log(e.data,"comment"),1==e.data.status&&(t.commentList=e.data.data,e.data.data.length<10&&(t.hasMore=!1),t.commentList&&t.commentList.forEach(function(t){t.content=r()(t.content,{sanitize:!0})}),t.loading=!1)})},submitComment:function(){var t=this;this.$post("/apis/comment/add",this.comment).then(function(e){console.log(e.data),t.comment.content="",t.detail.comment+=1,t.getComment()})},getMore:function(){var t=this,e={article_id:this.detail.id,page:this.page};this.$post("/apis/comment/read",e).then(function(e){var a;console.log(e.data,"commentList"),t.page+=1,e.data.data.length<10&&(t.hasMore=!1),e.data.data.forEach(function(t){t.content=t.content.replace(/\n/g,"<br>")}),(a=t.commentList).push.apply(a,Object(n["a"])(e.data.data))})},deleteComment:function(t){var e=this;this.$post("/apis/comment/remove",{id:t.id}).then(function(a){1==a.data.status?(e.commentList.splice(e.commentList.indexOf(t),1),e.$Message.success(a.data.msg),e.detail.comment-=1):e.$Message.error(a.data.msg)})}}}),m=d,u=(a("5826"),a("2877")),v=Object(u["a"])(m,i,s,!1,null,"62efdb73",null);v.options.__file="detail.vue";e["default"]=v.exports},a481:function(t,e,a){a("214f")("replace",2,function(t,e,a){return[function(i,s){"use strict";var n=t(this),c=void 0==i?void 0:i[e];return void 0!==c?c.call(i,n,s):a.call(String(n),i,s)},a]})},bc07:function(t,e,a){}}]);